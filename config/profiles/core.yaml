# AtlasBridge Deployment Profile: core
#
# The core profile is the default configuration for standard deployments.
# It provides full runtime capabilities with sensible defaults.
#
# To use: set ATLASBRIDGE_PROFILE=core or pass --profile core to `atlasbridge run`.
# See docs/deployment-profiles.md for the full reference.

profile: core

# ---------------------------------------------------------------------------
# Autonomy
# ---------------------------------------------------------------------------
autonomy:
  # Default autonomy mode — overridden by policy file autonomy_mode field.
  # Options: off | assist | full
  default_mode: assist

  # Maximum consecutive auto-replies before escalating to human
  max_auto_replies_per_rule: 10

  # Kill switch state persists across restarts
  kill_switch_persistent: true

# ---------------------------------------------------------------------------
# Escalation
# ---------------------------------------------------------------------------
escalation:
  # Action taken when no policy rule matches
  # Options: require_human | deny
  no_match_action: require_human

  # Action taken for LOW confidence detections
  low_confidence_action: require_human

  # Escalation timeout (seconds) — if no reply arrives, apply default
  timeout_seconds: 300

  # Action taken on channel timeout
  # Options: deny | require_human
  timeout_action: require_human

# ---------------------------------------------------------------------------
# Rate limiting
# ---------------------------------------------------------------------------
rate_limiting:
  # Maximum escalation messages per minute per session
  max_escalations_per_minute: 10

  # Circuit breaker: pause autopilot after N consecutive escalations
  consecutive_escalation_limit: 20

# ---------------------------------------------------------------------------
# Audit
# ---------------------------------------------------------------------------
audit:
  # Append-only audit log; hash chain always enabled
  hash_chain_enabled: true

  # Rotate audit log when it exceeds this size (bytes)
  max_log_bytes: 10485760  # 10 MB

  # Retain audit archives for N days (0 = keep forever)
  retention_days: 0

# ---------------------------------------------------------------------------
# Replay
# ---------------------------------------------------------------------------
replay:
  # Enable deterministic session replay
  enabled: true

  # Hash validation mode for replay
  # Options: strict | warn | off
  hash_validation: strict

# ---------------------------------------------------------------------------
# Telemetry
# ---------------------------------------------------------------------------
telemetry:
  # No external telemetry — local-first, no phone-home
  enabled: false
